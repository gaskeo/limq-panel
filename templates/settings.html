{% extends "base.html" %}

{% block content %}
<div class="data-container">
    <h4>Настройки для &laquo;{{ chan.name }}&raquo;</h4>
    <div class="row">
        <div class="col-3">
            <div class="list-group" id="list-tab" role="tablist">
                <a class="list-group-item list-group-item-action active" id="list-main-settings-open"
                   data-toggle="list" href="#list-mainsettings" role="tab"
                   aria-controls="mainsettings">Основное</a>
                <a class="list-group-item list-group-item-action" id="list-keys-open"
                   data-toggle="list" href="#list-key" role="tab" aria-controls="key">Ключи
                    доступа</a>
                <a class="list-group-item list-group-item-action" id="list-privacy-settings-open"
                   data-toggle="list" href="#list-privacy" role="tab"
                   aria-controls="key">Приватность</a>
            </div>
        </div>
        <div class="col-9">
            <div class="tab-content" id="nav-tabContent">
                <div class="tab-pane fade show active"
                     id="list-mainsettings" role="tabpanel" aria-labelledby="list-main-settings-open">
                    <form action="/do/settings" method="post">
                        {{ form_main_settings.hidden_tag() }}
                        <p>
                            {{ form_main_settings.name.label }}<br>
                            {{ form_main_settings.name(class="form-control") }}
                            {% for error in form_main_settings.name.errors %}
                        <p class="alert alert-danger" role="alert">
                            {{ error }}
                        </p>
                        {% endfor %}
                        <p>{{ form_main_settings.is_active() }} {{ form_main_settings.is_active.label }}</p>
                        <p>{{ form_main_settings.submit(type="submit", class="btn btn-primary") }}</p>
                    </form>
                </div>
                <div class="tab-pane fade" id="list-key" role="tabpanel"
                     aria-labelledby="list-keys-open">
                    <h5 class="register-label">Создать ключ</h5>

                    <form action="/do/grant" method="post">
                        {{ form_keys.hidden_tag() }}
                        <p>
                            {{ form_keys.name.label }}<br>
                            {{ form_keys.name(class="form-control") }}
                            {% for error in form_keys.name.errors %}
                        <p class="alert alert-danger" role="alert">
                            {{ error }}
                        </p>
                        {% endfor %}
                        <p>{{ form_keys.read() }} {{ form_keys.read.label }}</p>
                        <p>{{ form_keys.write() }} {{ form_keys.write.label }}</p>
                        <p>{{ form_keys.submit(type="submit", class="btn btn-primary") }}</p>
                    </form>
                    {% for key in keys %}
                    <div class="card w-100">
                        <div class="card-body">
                            <h5 class="card-title">{{ key.name }}</h5>
                            <p class="channel-id mb-2 text-muted">{{ rights[loop.index0] }}</p>
                            <p class="card-text"><span class="badge badge-secondary badge-key">{{ key.key }}</span></p>
                            <a href="#" class="btn btn-warning">Приостановить</a>
                            <a href="#" class="btn btn-danger">Удалить</a>

                        </div>
                    </div>
                    <br>
                    {% endfor %}
                </div>
                <div class="tab-pane fade" id="list-privacy" role="tabpanel"
                     aria-labelledby="list-keys-open">
                    ито потом
                </div>
            </div>
        </div>
    </div>
</div>

<script src="/static/js/index.js" charset="utf-8" defer></script>
{% endblock %}